# Frontmatter Schema Definition - Single Source of Truth
# This YAML file is the authoritative source for all frontmatter schema data
# Generated from: MT-SCHEMA-FRONTMATTER.md
# Last Updated: 2025-06-04

metadata:
  source_document: "MT-SCHEMA-FRONTMATTER.md"
  standard_id: "MT-SCHEMA-FRONTMATTER"
  version: "0.1.0"
  description: "Comprehensive schema for YAML frontmatter including field definitions, validation rules, and controlled vocabularies"
  
# Field Order - MANDATORY sequence for all frontmatter blocks
field_order:
  - title
  - standard_id
  - aliases
  - tags
  - kb-id
  - info-type
  - primary-topic
  - related-standards
  - version
  - date-created
  - date-modified
  - primary_domain
  - sub_domain
  - scope_application
  - criticality
  - lifecycle_gatekeeper
  - impact_areas
  - change_log_url

# Field Definitions - Complete schema for each field
fields:
  title:
    description: "The official title of the document"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "Must not be empty"
    
  standard_id:
    description: "A unique identifier for a standard document"
    mandatory: "conditional"
    mandatory_conditions:
      - "Required for info-type: standard-definition, policy-document"
      - "Optional for other document types, but recommended if document has canonical identifier"
    data_type: "string"
    validation_rules:
      - "MUST follow regex pattern: ^[A-Z]{2}-[A-Z]{2,6}-[A-Z0-9\\-]+$"
      - "Filename (excluding .md extension) SHOULD be identical to standard_id"
    
  aliases:
    description: "A list of alternative names or titles by which the document might be known"
    mandatory: false
    data_type: "list_of_strings"
    validation_rules:
      - "None beyond being a list of strings"
    
  tags:
    description: "A list of keywords or labels used to categorize the document"
    mandatory: true
    data_type: "list_of_strings"
    validation_rules:
      - "All tags MUST be in kebab-case"
      - "MUST include tags from specific categories: status/*, content-type/*, topic/*"
      - "Refer to MT-REGISTRY-TAG-GLOSSARY for comprehensive list"
    
  kb-id:
    description: "An identifier for the knowledge base this document belongs to"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "Must be in kebab-case"
      - "Value must come from controlled vocabulary in MT-REGISTRY-TAG-GLOSSARY"
    
  info-type:
    description: "Specifies the type or category of information the document represents"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "Must be in kebab-case"
      - "MUST be one of the predefined values in controlled_vocabularies.info_type"
    controlled_vocabulary: true
    
  primary-topic:
    description: "A concise statement describing the main subject or purpose of the document"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "Must not be empty"
    
  related-standards:
    description: "A list of other standards that are related to this document"
    mandatory: false
    data_type: "list_of_strings"
    validation_rules:
      - "Each string MUST be a valid standard_id or valid internal link format [[STANDARD_ID]]"
    
  version:
    description: "The version number of the document"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "Semantic versioning preferred (e.g., '1.0.0', '0.2.1-alpha')"
    
  date-created:
    description: "The date and time when the document was originally created"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "MUST be in ISO-8601 date-time format: YYYY-MM-DDTHH:MM:SSZ"
    
  date-modified:
    description: "The date and time when the document was last modified"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "MUST be in ISO-8601 date-time format: YYYY-MM-DDTHH:MM:SSZ"
    
  primary_domain:
    description: "The primary domain code (e.g., IT, HR, MT for Meta)"
    mandatory: "conditional"
    mandatory_conditions:
      - "Mandatory for standards documents"
      - "Optional otherwise"
    data_type: "string"
    validation_rules:
      - "Must be 2 uppercase letters"
      - "Value MUST exist in domain_codes.yaml"
    controlled_vocabulary: true
    
  sub_domain:
    description: "The sub-domain code (e.g., SECURITY, NETWORK, SCHEMA)"
    mandatory: "conditional"
    mandatory_conditions:
      - "Mandatory for standards documents"
      - "Optional otherwise"
    data_type: "string"
    validation_rules:
      - "Must be 2-6 uppercase letters"
      - "Value MUST exist in subdomain_registry.yaml for the given primary_domain"
    controlled_vocabulary: true
    
  scope_application:
    description: "Defines the scope to which this document applies"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "Must not be empty"
    
  criticality:
    description: "The criticality level of the document or the standard it defines"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "Value MUST come from controlled vocabulary (e.g., P0-Critical, P1-High, P2-Medium)"
      - "Refer to MT-REGISTRY-TAG-GLOSSARY"
    controlled_vocabulary: true
    
  lifecycle_gatekeeper:
    description: "Specifies the role or team responsible for approving transitions in the document's lifecycle"
    mandatory: true
    data_type: "string"
    validation_rules:
      - "Value MUST come from controlled vocabulary"
      - "Refer to MT-REGISTRY-TAG-GLOSSARY"
    controlled_vocabulary: true
    
  impact_areas:
    description: "A list of areas or systems that are affected by this document or standard"
    mandatory: true
    data_type: "list_of_strings"
    validation_rules:
      - "None beyond being a list of strings"
    
  change_log_url:
    description: "A URL or relative path pointing to the document's changelog"
    mandatory: "conditional"
    mandatory_conditions:
      - "Mandatory for standards"
    data_type: "string"
    validation_rules:
      - "If relative path, MUST start with ./"
      - "Linter SHOULD check for existence of linked file if relative path"

# Controlled Vocabularies
controlled_vocabularies:
  info_type:
    - standard-definition
    - policy-document
    - guide-document
    - glossary-document
    - template-document
    - registry-document
    - schema-document
    - chapter-document
    - key-definition-set
    - kb-definition-map
    - how-to-guide
    - tutorial-document
    - troubleshooting-guide
    - reference-document
    - architecture-overview
    - design-specification
    - meeting-notes
    - report-document
    - process-definition
    - role-definition
    - service-definition
    - api-specification
    - data-model-definition
    - security-standard
    - compliance-guideline
    - collection-document
    - changelog

# External References - Controlled vocabularies defined in other files
external_vocabularies:
  tags:
    source: "MT-REGISTRY-TAG-GLOSSARY"
    description: "Categories and specific tags for document classification"
  kb_id:
    source: "MT-REGISTRY-TAG-GLOSSARY"
    description: "Knowledge base identifiers"
  criticality:
    source: "MT-REGISTRY-TAG-GLOSSARY"
    description: "Criticality levels (P0-Critical, P1-High, P2-Medium, etc.)"
  lifecycle_gatekeeper:
    source: "MT-REGISTRY-TAG-GLOSSARY"
    description: "Roles/teams responsible for lifecycle approvals"
  primary_domain:
    source: "domain_codes.yaml"
    description: "Primary domain codes (2 uppercase letters)"
  sub_domain:
    source: "subdomain_registry.yaml"
    description: "Sub-domain codes (2-6 uppercase letters) per primary_domain"

# Business Rules and Complex Logic
business_rules:
  filename_consistency:
    rule: "For documents with standard_id, filename (excluding .md) SHOULD match standard_id exactly"
    applies_to: ["standard-definition", "policy-document"]
  
  conditional_mandatory_fields:
    standard_id:
      - condition: "info-type in [standard-definition, policy-document]"
        requirement: "mandatory"
      - condition: "other info-types"
        requirement: "optional but recommended if canonical ID exists"
    
    primary_domain:
      - condition: "info-type = standard-definition"
        requirement: "mandatory"
      - condition: "other info-types"
        requirement: "optional"
    
    sub_domain:
      - condition: "info-type = standard-definition"
        requirement: "mandatory"
      - condition: "other info-types"
        requirement: "optional"
    
    change_log_url:
      - condition: "info-type = standard-definition"
        requirement: "mandatory"
      - condition: "other info-types"
        requirement: "optional"

# Generation Metadata
generation_info:
  created_date: "2025-06-04"
  created_by: "SST Migration Script"
  purpose: "Single Source of Truth for frontmatter schema"
  replaces: "Manual parsing of MT-SCHEMA-FRONTMATTER.md"
  consumers:
    - "generate_frontmatter_registry.py"
    - "generate_schema_docs.py"
    - "frontmatter validators"
    - "naming enforcer"
    - "linting tools" 