{
  "manifest_version": "2.0",
  "plugin_metadata": {
    "name": "enhanced_frontmatter_action",
    "version": "2.0.0", 
    "description": "LLM-enhanced frontmatter generation with SHACL validation and schema constraint integration",
    "author": "Scribe Engine Development Team",
    "license": "MIT"
  },
  "hma_compliance": {
    "hma_version": "2.2",
    "tier_classification": {
      "mandatory": ["json_schema", "event_bus", "circuit_breaker"],
      "recommended": ["structured_logging", "health_checks", "metrics"],
      "alternative": ["llm_integration", "shacl_validation"]
    },
    "boundary_interfaces": [
      {
        "type": "inbound",
        "protocol": "event_bus", 
        "endpoint": "file_system_events",
        "telemetry_enabled": true
      },
      {
        "type": "outbound",
        "protocol": "file_system",
        "endpoint": "yaml_frontmatter_write",
        "telemetry_enabled": true
      },
      {
        "type": "outbound",
        "protocol": "http",
        "endpoint": "llm_api_calls",
        "telemetry_enabled": true
      }
    ]
  },
  "runtime_requirements": {
    "python_version": ">=3.8",
    "dependencies": {
      "required": [
        {
          "name": "pyyaml",
          "version": ">=6.0",
          "tier": "mandatory"
        },
        {
          "name": "structlog",
          "version": ">=23.1.0", 
          "tier": "recommended"
        }
      ],
      "optional": [
        {
          "name": "rdflib",
          "version": ">=6.0.0",
          "feature": "SHACL validation"
        },
        {
          "name": "pyshacl",
          "version": ">=0.20.0",
          "feature": "SHACL validation"
        },
        {
          "name": "openai",
          "version": ">=1.0.0",
          "feature": "LLM integration"
        }
      ]
    },
    "platform_support": ["windows", "linux", "macos"],
    "resource_limits": {
      "max_memory_mb": 512,
      "max_cpu_percent": 50,
      "max_file_handles": 50
    }
  },
  "interface_contracts": {
    "action_interface": {
      "entry_point": "enhanced_frontmatter_action.EnhancedFrontmatterAction",
      "configuration_schema": {
        "type": "object",
        "required": ["schema_file"],
        "properties": {
          "schema_file": {
            "type": "string",
            "description": "Path to YAML schema file for frontmatter validation"
          },
          "llm_enabled": {
            "type": "boolean",
            "default": true,
            "description": "Whether to use LLM for enhanced generation"
          },
          "validation_mode": {
            "type": "string",
            "enum": ["strict", "permissive", "disabled"],
            "default": "strict",
            "description": "SHACL validation strictness level"
          },
          "fallback_mode": {
            "type": "string",
            "enum": ["template", "basic", "skip"],
            "default": "template",
            "description": "Fallback behavior when LLM fails"
          },
          "max_retries": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10,
            "default": 3,
            "description": "Maximum LLM generation retry attempts"
          }
        }
      },
      "event_patterns": [
        {
          "event_type": "file_created",
          "file_patterns": ["*.md", "*.markdown"],
          "priority": 7
        },
        {
          "event_type": "file_modified",
          "file_patterns": ["*.md", "*.markdown"],
          "priority": 6
        }
      ],
      "output_schema": {
        "type": "object",
        "properties": {
          "frontmatter_added": {
            "type": "boolean"
          },
          "validation_passed": {
            "type": "boolean"
          },
          "llm_used": {
            "type": "boolean"
          },
          "fallback_used": {
            "type": "boolean"
          },
          "retry_count": {
            "type": "integer"
          }
        }
      }
    },
    "lifecycle_hooks": {
      "on_load": "initialize_llm_components",
      "on_config_change": "reload_schema_configuration",
      "health_check": "health_check"
    }
  },
  "security": {
    "permissions": [
      "file_read",
      "file_write",
      "network_access",
      "environment_access"
    ],
    "sandbox_compatible": true,
    "mtls_required": true
  }
}